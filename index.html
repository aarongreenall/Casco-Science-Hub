<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casco School Science</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tailwind CSS custom color configuration MUST come AFTER the CDN script -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'casco-main-teal': '#00BFBF', /* More vibrant teal */
                        'casco-dark-teal': '#009999', /* Darker version of new main teal */
                        'casco-light-teal': '#33EBEB', /* Lighter version of new main teal */
                        'casco-light-bg': '#E0F2F1', /* Retained for subtle background */
                    }
                }
            }
        }
    </script>
    
    <!-- Custom CSS embedded directly for reliable preview and deployment -->
    <style>
        /* Basic body font fallback */
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Ensure YouTube embeds are responsive (if added to sub-pages) */
        .aspect-w-16 {
          position: relative;
          width: 100%;
          padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
        }

        .aspect-w-16 iframe {
          position: absolute;
          width: 100%;
          height: 100%;
          top: 0;
          left: 0;
        }

        /* General styling for sections to ensure consistent padding and margins */
        section {
            margin-bottom: 2rem; /* Add some space between sections */
        }

        /* Styling for the fact generator button */
        #generateFactBtn {
            transition: background-color 0.3s ease-in-out, transform 0.1s ease-in-out;
        }

        #generateFactBtn:active {
            transform: scale(0.98);
        }

        /* --- Navigation Specific Styles --- */

        /* Mobile Menu Overlay */
        #mobile-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--color-casco-dark-teal);
            z-index: 50; /* High z-index to cover everything */
            transform: translateX(100%); /* Start off-screen to the right */
            transition: transform 0.3s ease-in-out;
            display: flex;
            flex-direction: column;
            padding: 1.5rem;
            overflow-y: auto; /* Enable scrolling for long menus */
        }

        #mobile-menu-overlay.is-open {
            transform: translateX(0); /* Slide in */
        }

        #mobile-menu-overlay ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        #mobile-menu-overlay li {
            margin-bottom: 0.5rem;
            position: relative; /* For nested absolute positioning if needed, but we'll use accordion */
        }

        #mobile-menu-overlay a, #mobile-menu-overlay button {
            display: block;
            width: 100%;
            padding: 0.75rem 1rem;
            color: white;
            text-align: left;
            font-size: 1.125rem; /* text-lg */
            border-radius: 0.375rem; /* rounded-md */
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
        }

        #mobile-menu-overlay a:hover, #mobile-menu-overlay button:hover {
            background-color: var(--color-casco-main-teal);
        }

        /* Mobile Accordion Sub-menus */
        #mobile-menu-overlay .mobile-accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
            background-color: rgba(0, 0, 0, 0.2); /* Slightly darker background for sub-items */
            border-radius: 0.375rem;
            margin-top: 0.25rem;
            padding-left: 1rem; /* Indent sub-items */
        }

        #mobile-menu-overlay .mobile-accordion-content.is-open {
            max-height: 500px; /* Adjust as needed for content height */
        }

        #mobile-menu-overlay .mobile-accordion-content a, #mobile-menu-overlay .mobile-accordion-content button {
            font-size: 1rem; /* text-base */
            padding: 0.5rem 1rem;
        }

        /* Mobile Hamburger Icon */
        #hamburger-button {
            display: block; /* Show on mobile */
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            z-index: 60; /* Ensure it's above the overlay */
            position: absolute;
            right: 1.5rem;
            top: 1.5rem;
        }

        #close-mobile-menu {
            align-self: flex-end; /* Push to top right of overlay */
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            margin-bottom: 1rem;
        }

        /* Desktop Navigation (Hidden by default, shown on md breakpoint) */
        #desktop-nav {
            display: none; /* Hidden on mobile */
        }

        @media (min-width: 768px) { /* md breakpoint */
            #hamburger-button {
                display: none; /* Hide hamburger on desktop */
            }
            #desktop-nav {
                display: block; /* Show desktop nav */
            }

            /* Desktop Dropdown Menus */
            .desktop-dropdown-menu {
                position: absolute;
                top: 100%; /* Position below the parent button */
                left: 0;
                min-width: 12rem;
                background-color: var(--color-casco-dark-teal);
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
                border-radius: 0.375rem;
                padding: 0;
                display: none; /* Hidden by default, shown on hover/focus */
                z-index: 10;
            }

            /* Show desktop dropdown on hover for top-level */
            #desktop-nav > ul > li.group:hover > .desktop-dropdown-menu {
                display: block;
            }

            /* Nested Desktop Dropdowns (e.g., Biology/Chemistry/Physics topics) */
            .desktop-dropdown-menu .group > .desktop-dropdown-menu {
                top: 0; /* Align top of nested menu with its parent LI */
                left: 100%; /* Position to the right of its parent LI */
                margin-top: 0;
                z-index: 20;
            }

            /* Show nested desktop dropdown on hover */
            .desktop-dropdown-menu .group:hover > .desktop-dropdown-menu {
                display: block;
            }

            /* Styles for desktop dropdown links */
            .desktop-dropdown-menu a {
                display: block;
                padding: 0.5rem 1rem;
                white-space: nowrap;
                color: black; /* Black text for readability */
            }

            .desktop-dropdown-menu a:hover {
                background-color: var(--color-casco-main-teal);
                color: white; /* White text on hover */
            }

            .desktop-dropdown-menu li:first-child a {
                border-top-left-radius: 0.375rem;
                border-top-right-radius: 0.375rem;
            }

            .desktop-dropdown-menu li:last-child a {
                border-bottom-left-radius: 0.375rem;
                border-bottom-right-radius: 0.375rem;
            }

            /* Desktop Dropdown Buttons */
            .desktop-dropdown-btn {
                background: none;
                border: none;
                cursor: pointer;
                padding: 0.5rem 1rem;
                display: flex;
                align-items: center;
                width: 100%;
                justify-content: space-between;
                color: white; /* Default color for top-level buttons */
            }
            #desktop-nav > ul > li > .desktop-dropdown-btn {
                color: white; /* Top-level buttons are white */
            }
            #desktop-nav > ul > li > .desktop-dropdown-btn:hover {
                color: var(--color-casco-light-teal); /* Hover color for top-level buttons */
            }
            .desktop-dropdown-menu li > .desktop-dropdown-btn {
                color: black; /* Nested buttons are black */
            }
            .desktop-dropdown-menu li > .desktop-dropdown-btn:hover {
                background-color: var(--color-casco-main-teal);
                color: white; /* White text on hover for nested buttons */
            }

            /* Arrow styling for desktop */
            .desktop-dropdown-btn svg {
                transition: transform 0.2s ease-in-out;
            }
            /* Arrow points down by default */
            /* Rotate arrow when dropdown is open (though desktop uses hover) */
            .desktop-dropdown-btn[aria-expanded="true"] svg {
                transform: rotate(180deg); /* Arrow points up when open */
            }
            /* Nested arrows should point right on desktop */
            .desktop-dropdown-menu li > .desktop-dropdown-btn svg {
                transform: rotate(-90deg); /* Arrow points right */
            }
            /* Rotate nested arrow when its direct parent is hovered/active */
            .desktop-dropdown-menu li.group:hover > .desktop-dropdown-btn svg {
                transform: rotate(0deg); /* Arrow points down when active */
            }
        }

        /* --- New Button Styles (for general content areas) --- */
        .content-button {
            display: flex;
            flex-direction: column; /* Icon above text */
            align-items: center;
            justify-content: center;
            padding: 1rem;
            background-color: var(--color-casco-main-teal);
            color: white; /* Default text color for the button */
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out;
            text-align: center;
            text-decoration: none; /* Remove underline for links */
            min-height: 150px; /* Ensure a good touch target size */
        }
        .content-button:hover {
            background-color: var(--color-casco-dark-teal);
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }
        .content-button svg { /* SVG icon styling */
            width: 80px; /* Adjusted icon size */
            height: 80px; /* Adjusted icon size */
            object-fit: contain; /* Ensure image fits without cropping */
            margin-bottom: 0.5rem;
            border-radius: 0.5rem; /* Slightly rounded corners for images */
            background-color: rgba(255,255,255,0.2); /* Slight white background for contrast */
            padding: 5px; /* Padding around icon */
            color: white; /* Default SVG color */
        }
        .content-button span {
            font-weight: 600; /* font-semibold */
            font-size: 1.125rem; /* text-lg */
            line-height: 1.25;
            color: black; /* Explicitly set text color to black for readability */
        }

        /* Responsive grid for buttons */
        #main-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); /* Flexible columns */
            gap: 1.5rem; /* Spacing between buttons */
        }

        /* Specific adjustments for mobile view of header nav links */
        @media (max-width: 767px) {
            #desktop-nav ul {
                flex-direction: column; /* Stack links vertically on mobile */
                align-items: flex-start;
                width: 100%;
            }
            #desktop-nav li {
                width: 100%;
                margin-bottom: 0.5rem;
            }
            #desktop-nav a {
                padding: 0.75rem 1rem;
                text-align: left;
                width: 100%;
            }
        }
    </style>

    <!-- MathJax (not strictly needed for dropdown debug, but keeping for consistency) -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
</head>
<body class="font-sans bg-gray-100 text-gray-800">
    <header class="bg-gradient-to-r from-casco-dark-teal to-casco-main-teal text-white p-6 shadow-lg rounded-b-xl relative">
        <div class="container mx-auto flex justify-between items-center">
            <a href="index.html" class="text-3xl md:text-4xl font-bold hover:text-casco-light-teal transition-colors duration-300">Casco School Science</a>
            
            <!-- Hamburger Button (Mobile Only) -->
            <button id="hamburger-button" aria-label="Open mobile menu" class="md:hidden p-2 rounded-md hover:bg-casco-main-teal transition-colors duration-200">
                &#9776; <!-- Hamburger icon -->
            </button>

            <!-- Desktop Navigation (Visible on md and larger screens) -->
            <nav id="desktop-nav" class="hidden md:block">
                <ul class="flex space-x-6">
                    <li><a href="index.html" class="hover:text-casco-light-teal transition-colors duration-300 text-lg p-2 rounded-md">Home</a></li>
                    <li><a href="KS3/index.html" class="hover:text-casco-light-teal transition-colors duration-300 text-lg p-2 rounded-md">KS3</a></li>
                    <li><a href="KS4/index.html" class="hover:text-casco-light-teal transition-colors duration-300 text-lg p-2 rounded-md">KS4</a></li>
                    <li><a href="KS5/index.html" class="hover:text-casco-light-teal transition-colors duration-300 text-lg p-2 rounded-md">KS5</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Mobile Menu Overlay (Hidden by default) -->
    <div id="mobile-menu-overlay" class="fixed inset-0 bg-casco-dark-teal z-50 transform translate-x-full transition-transform duration-300 md:hidden flex flex-col p-6 overflow-y-auto">
        <button id="close-mobile-menu" class="self-end text-white text-4xl leading-none p-2 rounded-md hover:bg-casco-main-teal transition-colors duration-200" aria-label="Close mobile menu">&times;</button>
        <nav class="flex-grow">
            <ul class="space-y-2">
                <li><a href="index.html" class="block p-3 text-white text-xl rounded-md hover:bg-casco-main-teal">Home</a></li>
                
                <!-- KS3 Accordion (Mobile) -->
                <li>
                    <button class="mobile-accordion-btn flex items-center justify-between w-full p-3 text-white text-xl rounded-md hover:bg-casco-main-teal" aria-expanded="false">
                        KS3
                        <svg class="w-6 h-6 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <ul class="mobile-accordion-content overflow-hidden transition-all duration-300 ease-in-out max-h-0 bg-casco-dark-teal/20 rounded-md mt-1">
                        <li><a href="KS3/Year7/index.html" class="block p-3 text-white text-lg hover:bg-casco-main-teal">Year 7</a></li>
                        <li><a href="KS3/Year8/index.html" class="block p-3 text-white text-lg hover:bg-casco-main-teal">Year 8</a></li>
                        <li><a href="KS3/Year9/index.html" class="block p-3 text-white text-lg hover:bg-casco-main-teal">Year 9</a></li>
                    </ul>
                </li>

                <!-- KS4 Accordion (Mobile) -->
                <li>
                    <button class="mobile-accordion-btn flex items-center justify-between w-full p-3 text-white text-xl rounded-md hover:bg-casco-main-teal" aria-expanded="false">
                        KS4
                        <svg class="w-6 h-6 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <ul class="mobile-accordion-content overflow-hidden transition-all duration-300 ease-in-out max-h-0 bg-casco-dark-teal/20 rounded-md mt-1">
                        <!-- Biology Nested Accordion -->
                        <li>
                            <button class="mobile-accordion-btn flex items-center justify-between w-full p-3 text-white text-lg rounded-md hover:bg-casco-main-teal" aria-expanded="false">
                                Biology
                                <svg class="w-6 h-6 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <ul class="mobile-accordion-content overflow-hidden transition-all duration-300 ease-in-out max-h-0 bg-casco-dark-teal/30 rounded-md mt-1 pl-4">
                                <li><a href="KS4/Biology/B1_Characteristics/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B1. Characteristics of living organisms</a></li>
                                <li><a href="KS4/Biology/B2_Cells/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B2. Cells</a></li>
                                <li><a href="KS4/Biology/B3_Movement_into_and_out_of_cells/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B3. Movement into and out of cells</a></li>
                                <li><a href="KS4/Biology/B4_Biological_Molecules/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B4. Biological molecules</a></li>
                                <li><a href="KS4/Biology/B5_Enzymes/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B5. Enzymes</a></li>
                                <li><a href="KS4/Biology/B6_Plant_Nutrition/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B6. Plant nutrition</a></li>
                                <li><a href="KS4/Biology/B7_Human_Nutrition/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B7. Human nutrition</a></li>
                                <li><a href="KS4/Biology/B8_Transport_in_Plants/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B8. Transport in plants</a></li>
                                <li><a href="KS4/Biology/B9_Transport_in_Animals/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B9. Transport in animals</a></li>
                                <li><a href="KS4/Biology/B10_Diseases_and_Immunity/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B10. Diseases and immunity</a></li>
                                <li><a href="KS4/Biology/B11_Gas_Exchange_in_Humans/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B11. Gas exchange in humans</a></li>
                                <li><a href="KS4/Biology/B12_Respiration/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B12. Respiration</a></li>
                                <li><a href="KS4/Biology/B13_Coordination_and_Response/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B13. Coordination and response</a></li>
                                <li><a href="KS4/Biology/B14_Drugs/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B14. Drugs</a></li>
                                <li><a href="KS4/Biology/B15_Reproduction/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B15. Reproduction</a></li>
                                <li><a href="KS4/Biology/B16_Inheritance/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B16. Inheritance</a></li>
                                <li><a href="KS4/Biology/B17_Variation_and_Selection/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B17. Variation and selection</a></li>
                                <li><a href="KS4/Biology/B18_Organisms_and_their_Environment/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B18. Organisms and their environment</a></li>
                                <li><a href="KS4/Biology/B19_Human_Influences_on_Ecosystems/index.html" class="block p-3 text-white hover:bg-casco-main-teal">B19. Human influences on ecosystems</a></li>
                            </ul>
                        </li>
                        <!-- Chemistry Nested Accordion -->
                        <li>
                            <button class="mobile-accordion-btn flex items-center justify-between w-full p-3 text-white text-lg rounded-md hover:bg-casco-main-teal" aria-expanded="false">
                                Chemistry
                                <svg class="w-6 h-6 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <ul class="mobile-accordion-content overflow-hidden transition-all duration-300 ease-in-out max-h-0 bg-casco-dark-teal/30 rounded-md mt-1 pl-4">
                                <li><a href="KS4/Chemistry/C1_States_of_Matter/index.html" class="block p-3 text-white hover:bg-casco-main-teal">C1. States of matter</a></li>
                                <li><a href="KS4/Chemistry/C2_Atoms_Elements_and_Compounds/index.html" class="block p-3 text-white hover:bg-casco-main-teal">C2. Atoms, elements and compounds</a></li>
                                <li><a href="KS4/Chemistry/C3_Stoichiometry/index.html" class="block p-3 text-white hover:bg-casco-main-teal">C3. Stoichiometry</a></li>
                                <li><a href="KS4/Chemistry/C4_Electrochemistry/index.html" class="block p-3 text-white hover:bg-casco-main-teal">C4. Electrochemistry</a></li>
                                <li><a href="KS4/Chemistry/C5_Chemical_Energetics/index.html" class="block p-3 text-white hover:bg-casco-main-teal">C5. Chemical energetics</a></li>
                                <li><a href="KS4/Chemistry/C6_Chemical_Reactions/index.html" class="block p-3 text-white hover:bg-casco-main-teal">C6. Chemical reactions</a></li>
                                <li><a href="KS4/Chemistry/C7_Acids_Bases_and_Salts/index.html" class="block p-3 text-white hover:bg-casco-main-teal">C7. Acids, bases and salts</a></li>
                                <li><a href="KS4/Chemistry/C8_The_Periodic_Table/index.html" class="block p-3 text-white hover:bg-casco-main-teal">C8. The Periodic Table</a></li>
                                <li><a href="KS4/Chemistry/C9_Metals/index.html" class="block p-3 text-white hover:bg-casco-main-teal">C9. Metals</a></li>
                                <li><a href="KS4/Chemistry/C10_Chemistry_of_the_Environment/index.html" class="block p-3 text-white hover:bg-casco-main-teal">C10. Chemistry of the environment</a></li>
                                <li><a href="KS4/Chemistry/C11_Organic_Chemistry/index.html" class="block p-3 text-white hover:bg-casco-main-teal">C11. Organic chemistry</a></li>
                                <li><a href="KS4/Chemistry/C12_Experimental_Techniques_and_Chemical_Analysis/index.html" class="block p-3 text-white hover:bg-casco-main-teal">C12. Experimental techniques and chemical analysis</a></li>
                            </ul>
                        </li>
                        <!-- Physics Nested Accordion -->
                        <li>
                            <button class="mobile-accordion-btn flex items-center justify-between w-full p-3 text-white text-lg rounded-md hover:bg-casco-main-teal" aria-expanded="false">
                                Physics
                                <svg class="w-6 h-6 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <ul class="mobile-accordion-content overflow-hidden transition-all duration-300 ease-in-out max-h-0 bg-casco-dark-teal/30 rounded-md mt-1 pl-4">
                                <li><a href="KS4/Physics/P1_Motion_Forces_and_Energy/index.html" class="block p-3 text-white hover:bg-casco-main-teal">P1. Motion, forces and energy</a></li>
                                <li><a href="KS4/Physics/P2_Thermal_Physics/index.html" class="block p-3 text-white hover:bg-casco-main-teal">P2. Thermal physics</a></li>
                                <li><a href="KS4/Physics/P3_Waves/index.html" class="block p-3 text-white hover:bg-casco-main-teal">P3. Waves</a></li>
                                <li><a href="KS4/Physics/P4_Electricity_and_Magnetism/index.html" class="block p-3 text-white hover:bg-casco-main-teal">P4. Electricity and magnetism</a></li>
                                <li><a href="KS4/Physics/P5_Nuclear_Physics/index.html" class="block p-3 text-white hover:bg-casco-main-teal">P5. Nuclear physics</a></li>
                                <li><a href="KS4/Physics/P6_Space_Physics/index.html" class="block p-3 text-white hover:bg-casco-main-teal">P6. Space physics</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>

                <!-- KS5 Accordion (Mobile) -->
                <li>
                    <button class="mobile-accordion-btn flex items-center justify-between w-full p-3 text-white text-xl rounded-md hover:bg-casco-main-teal" aria-expanded="false">
                        KS5
                        <svg class="w-6 h-6 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <ul class="mobile-accordion-content overflow-hidden transition-all duration-300 ease-in-out max-h-0 bg-casco-dark-teal/20 rounded-md mt-1">
                        <li><a href="KS5/ib_biology/index.html" class="block p-3 text-white text-lg hover:bg-casco-main-teal">IB Biology</a></li>
                        <li><a href="KS5/ib_chemistry/index.html" class="block p-3 text-white text-lg hover:bg-casco-main-teal">IB Chemistry</a></li>
                        <li><a href="KS5/ib_physics/index.html" class="block p-3 text-white text-lg hover:bg-casco-main-teal">IB Physics</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </div>

    <main class="container mx-auto p-4 md:p-8">
        <!-- Welcome Section -->
        <section id="welcome" class="bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-semibold text-casco-main-teal mb-4">Welcome, Casco School Scientists!</h2>
            <p class="text-lg leading-relaxed">
                This is your central resource for all things science. Navigate through the menu above to find comprehensive notes, engaging videos, and interactive tools to deepen your understanding in Biology, Chemistry, and Physics.
            </p>
        </section>

        <!-- New Buttons Section -->
        <section id="main-buttons" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            <a href="KS3/index.html" class="content-button">
                <svg class="w-20 h-20" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="color: white;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5s3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18s-3.332.477-4.5 1.253"></path></svg>
                <span>Key Stage 3</span>
            </a>
            <a href="KS4/index.html" class="content-button">
                <svg class="w-20 h-20" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="color: white;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 10.5a.75.75 0 100 1.5.75.75 0 000-1.5zM12 10.5a.75.75 0 100 1.5.75.75 0 000-1.5zM15 10.5a.75.75 0 100 1.5.75.75 0 000-1.5z"></path></svg>
                <span>Key Stage 4</span>
            </a>
            <a href="KS5/index.html" class="content-button">
                <svg class="w-20 h-20" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="color: white;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5s3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18s-3.332.477-4.5 1.253"></path></svg>
                <span>Key Stage 5 (IB)</span>
            </a>
            <a href="https://classroom.google.com" target="_blank" class="content-button">
                <svg class="w-20 h-20" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="color: white;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                <span>Google Classroom</span>
            </a>
            <a href="https://notebooklm.google.com" target="_blank" class="content-button">
                <svg class="w-20 h-20" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="color: white;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
                <span>Notebook LM</span>
            </a>
            <!-- Add more buttons here as needed -->
        </section>


        <!-- General Interactive Content Section -->
        <section id="interactive" class="bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-semibold text-casco-main-teal mb-4">Quick Science Fact</h2>
            <div class="space-y-6">
                <div class="interactive-card bg-casco-light-bg p-4 rounded-lg shadow-sm text-center">
                    <h3 class="text-lg font-medium text-gray-900 mb-2">Science Fact Generator</h3>
                    <p id="scienceFact" class="text-gray-700 mb-4">Click the button to get a random science fact!</p>
                    <button id="generateFactBtn" class="bg-casco-main-teal hover:bg-casco-dark-teal text-white font-bold py-2 px-4 rounded-full transition-colors duration-300 shadow-md">
                        Generate Fact
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer Section -->
    <footer class="bg-casco-dark-teal text-white p-6 mt-8 rounded-t-xl">
        <div class="container mx-auto text-center text-sm">
            &copy; 2025 The Casco School Science Department. Curated by Mr. Aaron.
        </div>
    </footer>

    <!-- JavaScript embedded directly for reliable deployment -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Mobile Menu / Hamburger Logic ---
            const hamburgerButton = document.getElementById('hamburger-button');
            const closeMobileMenuButton = document.getElementById('close-mobile-menu');
            const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');

            if (hamburgerButton && mobileMenuOverlay) {
                hamburgerButton.addEventListener('click', () => {
                    mobileMenuOverlay.classList.add('is-open');
                });
            }

            if (closeMobileMenuButton && mobileMenuOverlay) {
                closeMobileMenuButton.addEventListener('click', () => {
                    mobileMenuOverlay.classList.remove('is-open');
                    // Close any open accordions when closing the main mobile menu
                    document.querySelectorAll('#mobile-menu-overlay .mobile-accordion-content.is-open').forEach(content => {
                        content.classList.remove('is-open');
                        content.style.maxHeight = '0';
                        const btn = content.previousElementSibling;
                        if (btn) btn.setAttribute('aria-expanded', 'false');
                    });
                });
            }

            // --- Accordion Logic (for mobile menu) ---
            const mobileAccordionButtons = document.querySelectorAll('.mobile-accordion-btn');

            mobileAccordionButtons.forEach(button => {
                button.addEventListener('click', function(event) {
                    event.stopPropagation(); // Prevent click from bubbling up
                    const content = this.nextElementSibling; // The <ul> that is the accordion content

                    if (content && content.classList.contains('mobile-accordion-content')) {
                        
                        // Close other open accordions at the same level
                        const parentUl = this.closest('ul'); // Get the parent <ul> (either main or nested)
                        if (parentUl) {
                            // Find all accordion contents within this parentUl
                            parentUl.querySelectorAll('.mobile-accordion-content.is-open').forEach(openContent => {
                                // Only close if it's currently open and not the one just clicked
                                if (openContent !== content) {
                                    openContent.classList.remove('is-open');
                                    openContent.style.maxHeight = '0';
                                    const btn = openContent.previousElementSibling;
                                    if (btn) btn.setAttribute('aria-expanded', 'false');
                                }
                            });
                        }
                        
                        // Toggle this accordion
                        content.classList.toggle('is-open');
                        if (content.classList.contains('is-open')) {
                            content.style.maxHeight = content.scrollHeight + 'px'; // Set height dynamically
                            button.setAttribute('aria-expanded', 'true');
                        } else {
                            content.style.maxHeight = '0';
                            button.setAttribute('aria-expanded', 'false');
                        }
                    }
                });
            });

            // --- Desktop Hover Logic (for desktop navigation) ---
            const desktopNavGroups = document.querySelectorAll('#desktop-nav .group');

            desktopNavGroups.forEach(groupLi => {
                const desktopMenu = groupLi.querySelector('.desktop-dropdown-menu');
                const desktopButton = groupLi.querySelector('.desktop-dropdown-btn');

                if (desktopMenu && desktopButton) {
                    // Open on mouseenter
                    groupLi.addEventListener('mouseenter', () => {
                        // Close any other open top-level desktop menus
                        document.querySelectorAll('#desktop-nav > ul > li.group').forEach(openGroup => {
                            if (openGroup !== groupLi) {
                                const menu = openGroup.querySelector('.desktop-dropdown-menu');
                                const btn = openGroup.querySelector('.desktop-dropdown-btn');
                                if (menu && menu.style.display === 'block') {
                                    menu.style.display = 'none';
                                    if (btn) btn.setAttribute('aria-expanded', 'false');
                                }
                            }
                        });
                        
                        // Open current menu
                        desktopMenu.style.display = 'block';
                        desktopButton.setAttribute('aria-expanded', 'true');
                        groupLi.classList.add('is-open'); // For arrow rotation
                    });

                    // Close on mouseleave (with a slight delay to allow moving to sub-menu)
                    groupLi.addEventListener('mouseleave', (e) => {
                        // Check if the mouse is truly outside the entire group (li and its children)
                        // Use a setTimeout to allow mouse to enter the submenu before closing
                        setTimeout(() => {
                            if (!groupLi.matches(':hover')) { // Check if mouse is truly outside
                                desktopMenu.style.display = 'none';
                                desktopButton.setAttribute('aria-expanded', 'false');
                                groupLi.classList.remove('is-open'); // For arrow rotation
                            }
                        }, 150); // Increased delay
                    });

                    // For nested desktop menus (e.g., Biology/Chemistry/Physics), ensure they open/close on hover
                    desktopMenu.querySelectorAll('li.group').forEach(nestedGroupLi => {
                        const nestedMenu = nestedGroupLi.querySelector('.desktop-dropdown-menu');
                        const nestedButton = nestedGroupLi.querySelector('.desktop-dropdown-btn');
                        if (nestedMenu && nestedButton) {
                            nestedGroupLi.addEventListener('mouseenter', (e) => {
                                e.stopPropagation(); // Prevent parent menu from closing
                                nestedMenu.style.display = 'block';
                                nestedButton.setAttribute('aria-expanded', 'true');
                                nestedGroupLi.classList.add('is-open'); // For arrow rotation
                            });
                            nestedGroupLi.addEventListener('mouseleave', (e) => {
                                setTimeout(() => {
                                    if (!nestedGroupLi.matches(':hover')) {
                                        nestedMenu.style.display = 'none';
                                        nestedButton.setAttribute('aria-expanded', 'false');
                                        nestedGroupLi.classList.remove('is-open'); // For arrow rotation
                                    }
                                }, 150); // Increased delay
                            });
                        }
                    });
                }
            });

            // Close all desktop dropdowns when clicking anywhere outside the nav (excluding mobile overlay)
            document.addEventListener('click', function(event) {
                // Only run this if on desktop view (or if mobile overlay is not open)
                if (window.innerWidth >= 768 && !event.target.closest('#desktop-nav') && !mobileMenuOverlay.classList.contains('is-open')) {
                    document.querySelectorAll('#desktop-nav .desktop-dropdown-menu').forEach(menu => {
                        menu.style.display = 'none';
                        const btn = menu.previousElementSibling;
                        if (btn) btn.setAttribute('aria-expanded', 'false');
                    });
                    document.querySelectorAll('#desktop-nav .group.is-open').forEach(group => {
                        group.classList.remove('is-open'); // For arrow rotation
                    });
                }
            });


            // Interactive Content: Science Fact Generator
            const scienceFacts = [
                "The human brain weighs about 3 pounds but uses 20% of the body's oxygen and calories.",
                "A bolt of lightning is five times hotter than the surface of the Sun.",
                "Honey never spoils. Archaeologists have found pots of honey in ancient Egyptian tombs that are over 3,000 years old and still edible.",
                "There are more stars in the universe than grains of sand on all the beaches on Earth.",
                "The Earth's core is as hot as the surface of the Sun.",
                "A group of owls is called a parliament.",
                "The fastest land animal is the cheetah, which can reach speeds of up to 70 mph (112 km/h).",
                "The total weight of all ants on Earth is roughly equal to the total weight of all humans.",
                "Sound travels about 4.3 times faster in water than in air.",
                "The shortest war in history was between Britain and Zanzibar on August 27, 1896. It lasted only 38 minutes."
            ];

            const generateFactBtn = document.getElementById('generateFactBtn');
            const scienceFactDisplay = document.getElementById('scienceFact');

            if (generateFactBtn && scienceFactDisplay) {
                generateFactBtn.addEventListener('click', () => {
                    const randomIndex = Math.floor(Math.random() * scienceFacts.length);
                    scienceFactDisplay.textContent = scienceFacts[randomIndex];
                });
            }
        });
    </script>
</body>
</html>
